<!DOCTYPE html>
<html>
<head>
    <title>Combined RTSP Stream</title>
    <style>
        .container {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: #f0f0f0;
        }
        #streamPlayer {
            max-width: 100%;
            max-height: 80vh;
        }
    </style>
</head>
<body>
    <div class="container">
        <video id="streamPlayer" autoplay controls>
            <source src="{{ url_for('stream_feed') }}" type="application/x-rtsp-tunnelled">
            Your browser doesn't support RTSP streaming.
        </video>
    </div>

    <script>
        const player = document.getElementById('streamPlayer');
        
        player.addEventListener('error', (e) => {
            console.error('Stream error:', e);
            // Attempt to reconnect after 5 seconds
            setTimeout(() => {
                player.load();
                player.play();
            }, 5000);
        });
    </script>
</body>
</html>